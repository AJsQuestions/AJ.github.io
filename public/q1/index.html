<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Trading Bot in a 100 lines of code | AJ</title>
<meta name="keywords" content="Python, Alpaca, Machine Learning, Data Science, Quant Finance">
<meta name="description" content="I build a trading bot using a simple strategy in a 100 lines of code">
<meta name="author" content="AJ">
<link rel="canonical" href="https://ajsquestions.github.io/q1/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.4c26068e314664f9b72d77e34bade7e3c41336c8b50cb7ff1a3960e528f68fe4.css" integrity="sha256-TCYGjjFGZPm3LXfjS63n48QTNsi1DLf/Gjlg5Sj2j&#43;Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://ajsquestions.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://ajsquestions.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://ajsquestions.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://ajsquestions.github.io/apple-touch-icon.png">

<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Trading Bot in a 100 lines of code" />
<meta property="og:description" content="I build a trading bot using a simple strategy in a 100 lines of code" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ajsquestions.github.io/q1/" />
<meta property="og:image" content="https://ajsquestions.github.io/q1/AJpicture.jpeg" /><meta property="article:section" content="questions" />
<meta property="article:published_time" content="2024-01-04T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-01-04T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://ajsquestions.github.io/q1/AJpicture.jpeg" />
<meta name="twitter:title" content="Trading Bot in a 100 lines of code"/>
<meta name="twitter:description" content="I build a trading bot using a simple strategy in a 100 lines of code"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Questions",
      "item": "https://ajsquestions.github.io/questions/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Trading Bot in a 100 lines of code",
      "item": "https://ajsquestions.github.io/q1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Trading Bot in a 100 lines of code",
  "name": "Trading Bot in a 100 lines of code",
  "description": "I build a trading bot using a simple strategy in a 100 lines of code",
  "keywords": [
    "Python", "Alpaca", "Machine Learning", "Data Science", "Quant Finance"
  ],
  "articleBody": "Building a Trade Bot from Scratch In a 100 lines of code The world of financial trading is complex; it requires thorough knowledge of a number of practical aspects of the trade cycle to successfully run a stratgy.\nIn this project, I tried to make trading as simple as running a cell in a jupyter notebook.\nOf course there was systematic thought involved in building the bot, but the idea wasn’t to develop a sophisticated strategy, rather, to develop A strategy FAST.\n1. The Data But first…\n1.1 Alpaca Alpaca is an API first broker that allows you to trade and maintain your portfolio using their python REST API. I used Alpaca as my broker and obtained API-keys for my paper trading acccount on Alpaca, as with any other SaaS.\n1.2 Universe I chose my universe of assets to be approximately 200 US ETFs chosen from a larger universe of 4000+ listed US ETFs. The criterion of selection was a threshold on the volume weighted average price having a mean of larger than a 100 in the past month. The volume weighted average price is a proxy measure for the liquidity of the asset. I preferred to deal with highly liquid ETFs.\nThe list of 4000+ tickers was pulled from the data vendor 12Data. They maintain an API endpoint for all 13000+ ETFs listed on all major exchanges in the world!\nThis is however, a matter of discretion, and not science, and one is free to choose the universe in any other way they desire, without changing the approach. It could be stocks, bonds, options, currency, crypto, or other alternatives.\n1.3 OLHCV Data With our universe determined, I now pull data for the last 8 years in the following manner:\nDeclare your Alpaca API Keys Set up data strcutures to store: symbols to buy symbols to sell last close prices of symbols to buy returns of symbols to buy Determine training period using the datetime module Pull OLHCV bar data from Alpaca API ",
  "wordCount" : "333",
  "inLanguage": "en",
  "image":"https://ajsquestions.github.io/q1/AJpicture.jpeg","datePublished": "2024-01-04T00:00:00Z",
  "dateModified": "2024-01-04T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "AJ"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://ajsquestions.github.io/q1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "AJ",
    "logo": {
      "@type": "ImageObject",
      "url": "https://ajsquestions.github.io/favicon.ico"
    }
  }
}
</script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false},
            {left: "\\begin{equation}", right: "\\end{equation}", display: true},
            {left: "\\begin{equation*}", right: "\\end{equation*}", display: true},
            {left: "\\begin{align}", right: "\\end{align}", display: true},
            {left: "\\begin{align*}", right: "\\end{align*}", display: true},
            {left: "\\begin{alignat}", right: "\\end{alignat}", display: true},
            {left: "\\begin{gather}", right: "\\end{gather}", display: true},
            {left: "\\begin{CD}", right: "\\end{CD}", display: true},
          ],
          
          throwOnError : false
        });
    });
</script>
 


</head>

<body class=" dark" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://ajsquestions.github.io/" accesskey="h" title="AJ">
             
                <img src="https://ajsquestions.github.io/favicon-16x16" alt="" aria-label="logo"
                    height="18"
                    width="18">AJ</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://ajsquestions.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://ajsquestions.github.io/research/" title="Research">
                    <span>Research</span>
                </a>
            </li>
            <li>
                <a href="https://ajsquestions.github.io/blog/" title="Questions">
                    <span>Questions</span>
                </a>
            </li>
            <li>
                <a href="https://ajsquestions.github.io/contact/" title="Connect">
                    <span>Connect</span>
                </a>
            </li>
            <li>
                <a href="https://ajsquestions.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>

    <main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Trading Bot in a 100 lines of code
    </h1>

    <div class="post-meta">&lt;span title=&#39;2024-01-04 00:00:00 &#43;0000 UTC&#39;&gt;January 2024&lt;/span&gt;&amp;nbsp;&amp;middot;&amp;nbsp;AJ

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#in-a-100-lines-of-code">In a 100 lines of code</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="building-a-trade-bot-from-scratch">Building a Trade Bot from Scratch<a hidden class="anchor" aria-hidden="true" href="#building-a-trade-bot-from-scratch">#</a></h1>
<h2 id="in-a-100-lines-of-code">In a 100 lines of code<a hidden class="anchor" aria-hidden="true" href="#in-a-100-lines-of-code">#</a></h2>
<p>The world of financial trading is complex; it requires thorough knowledge of a number of practical aspects of the trade cycle to successfully run a stratgy.</p>
<p>In this project, I tried to make trading as simple as running a cell in a jupyter notebook.</p>
<p>Of course there was systematic thought involved in building the bot, but the idea wasn&rsquo;t to develop a sophisticated strategy, rather, to develop A strategy FAST.</p>
<h3 id="1-the-data">1. The Data<a hidden class="anchor" aria-hidden="true" href="#1-the-data">#</a></h3>
<p>But first&hellip;</p>
<h4 id="11-alpaca">1.1 Alpaca<a hidden class="anchor" aria-hidden="true" href="#11-alpaca">#</a></h4>
<p>Alpaca is an API first broker that allows you to trade and maintain your portfolio using their python REST API. I used Alpaca as my broker and obtained API-keys for my paper trading acccount on Alpaca, as with any other SaaS.</p>
<h4 id="12-universe">1.2 Universe<a hidden class="anchor" aria-hidden="true" href="#12-universe">#</a></h4>
<p>I chose my universe of assets to be approximately 200 US ETFs chosen from a larger universe of 4000+ listed US ETFs. The criterion of selection was a threshold on the volume weighted average price having a mean of larger than a 100 in the past month. The volume weighted average price is a proxy measure for the liquidity of the asset. I preferred to deal with highly liquid ETFs.</p>
<p>The list of 4000+ tickers was pulled from the data vendor 12Data. They maintain an API endpoint for all 13000+ ETFs listed on all major exchanges in the world!</p>
<p>This is however, a matter of discretion, and not science, and one is free to choose the universe in any other way they desire, without changing the approach. It could be stocks, bonds, options, currency, crypto, or other alternatives.</p>
<h4 id="13-olhcv-data">1.3 OLHCV Data<a hidden class="anchor" aria-hidden="true" href="#13-olhcv-data">#</a></h4>
<p>With our universe determined, I now pull data for the last 8 years in the following manner:</p>
<ol>
<li>Declare your Alpaca API Keys</li>
<li>Set up data strcutures to store:
<ul>
<li>symbols to buy</li>
<li>symbols to sell</li>
<li>last close prices of symbols to buy</li>
<li>returns of symbols to buy</li>
</ul>
</li>
<li>Determine training period using the datetime module</li>
<li>Pull OLHCV bar data from Alpaca API</li>
<li></li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://ajsquestions.github.io/tags/python/">Python</a></li>
      <li><a href="https://ajsquestions.github.io/tags/alpaca/">Alpaca</a></li>
      <li><a href="https://ajsquestions.github.io/tags/machine-learning/">Machine Learning</a></li>
      <li><a href="https://ajsquestions.github.io/tags/data-science/">Data Science</a></li>
      <li><a href="https://ajsquestions.github.io/tags/quant-finance/">Quant Finance</a></li>
    </ul>
  </footer>
</article>
    </main>
    

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>
</html>
